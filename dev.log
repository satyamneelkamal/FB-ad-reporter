
> my-app@0.1.0 dev
> next dev --turbopack

   â–² Next.js 15.5.0 (Turbopack)
   - Local:        http://localhost:3000
   - Network:      http://172.18.13.26:3000
   - Environments: .env.local

 âœ“ Starting...
 â—‹ Compiling middleware ...
 âœ“ Compiled middleware in 4.9s
 âœ“ Ready in 31.5s
âš ï¸  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217
 â—‹ Compiling /api/auth ...
 âœ“ Compiled /api/auth in 10.5s
âš ï¸  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217
â„¹ï¸ [Auth] Login attempt { email: 'ankur@fotoplane.com' }
â„¹ï¸ [Auth] Admin action: user_login_success {
  adminEmail: 'ankur@fotoplane.com',
  action: 'user_login_success',
  timestamp: '2025-08-27T16:15:10.029Z',
  user_id: 'efd82a79-d304-4bdd-815a-8e73765bee1d',
  client_id: 9
}
 POST /api/auth 200 in 15571ms
 â—‹ Compiling /client/analytics/demographics ...
 âœ“ Compiled /client/analytics/demographics in 35.5s
 GET /client/analytics/demographics 200 in 39905ms
 GET /client/analytics/demographics 200 in 1366ms
 â—‹ Compiling /favicon.ico ...
 âœ“ Compiled /favicon.ico in 3.8s
 GET /favicon.ico?favicon.0b3bf435.ico 200 in 5293ms
 GET /avatars/client.jpg 404 in 4895ms
ğŸ” [Analytics Cache] Fetching cached data for client 9
ğŸ”„ [Analytics Cache] Cached data is stale or missing, refreshing...
ğŸ”„ [Analytics Cache] Processing fresh Facebook data...
ğŸ“‹ [Analytics Cache] Report data keys: [
  'hourly',
  'adLevel',
  'devices',
  'regional',
  'campaigns',
  'platforms',
  'date_range',
  'scraped_at',
  'demographics',
  'month_identifier',
  'collection_summary'
]
ğŸ¯ [generateFullAnalytics] STARTING ANALYTICS PROCESSING
ğŸ“‚ [generateFullAnalytics] Data arrays: { campaigns: 25, demographics: 13, adLevel: 25 }
ğŸ” Analytics Debug:
ğŸ“Š Demographics length: 13
ğŸ“Š First demo spend: 2148.984817
ğŸ“Š Campaigns length: 25
ğŸ“Š First campaign spend: 0
ğŸ“Š Total calculated spend: 43669.800001999996
âœ¨ [Analytics Cache] Analytics processing completed
âŒ [Analytics Cache] Failed to cache data: {
  code: '23505',
  details: 'Key (client_id)=(9) already exists.',
  hint: null,
  message: 'duplicate key value violates unique constraint "analytics_cache_client_id_key"'
}
 GET /api/client/analytics/cached 200 in 7800ms
 â—‹ Compiling /client/analytics ...
 âœ“ Compiled /client/analytics in 2.8s
 GET /client/analytics 200 in 4811ms
 GET /avatars/client.jpg 404 in 2509ms
ğŸ” [Analytics Cache] Fetching cached data for client 9
ğŸ”„ [Analytics Cache] Cached data is stale or missing, refreshing...
ğŸ”„ [Analytics Cache] Processing fresh Facebook data...
ğŸ“‹ [Analytics Cache] Report data keys: [
  'hourly',
  'adLevel',
  'devices',
  'regional',
  'campaigns',
  'platforms',
  'date_range',
  'scraped_at',
  'demographics',
  'month_identifier',
  'collection_summary'
]
ğŸ¯ [generateFullAnalytics] STARTING ANALYTICS PROCESSING
ğŸ“‚ [generateFullAnalytics] Data arrays: { campaigns: 25, demographics: 13, adLevel: 25 }
ğŸ” Analytics Debug:
ğŸ“Š Demographics length: 13
ğŸ“Š First demo spend: 2148.984817
ğŸ“Š Campaigns length: 25
ğŸ“Š First campaign spend: 0
ğŸ“Š Total calculated spend: 43669.800001999996
âœ¨ [Analytics Cache] Analytics processing completed
âŒ [Analytics Cache] Failed to cache data: {
  code: '23505',
  details: 'Key (client_id)=(9) already exists.',
  hint: null,
  message: 'duplicate key value violates unique constraint "analytics_cache_client_id_key"'
}
 GET /api/client/analytics/cached 200 in 5004ms
 GET /client/analytics 200 in 1362ms
 GET /avatars/client.jpg 404 in 1890ms
ğŸ” [Analytics Cache] Fetching cached data for client 9
ğŸ”„ [Analytics Cache] Cached data is stale or missing, refreshing...
ğŸ”„ [Analytics Cache] Processing fresh Facebook data...
ğŸ“‹ [Analytics Cache] Report data keys: [
  'hourly',
  'adLevel',
  'devices',
  'regional',
  'campaigns',
  'platforms',
  'date_range',
  'scraped_at',
  'demographics',
  'month_identifier',
  'collection_summary'
]
ğŸ¯ [generateFullAnalytics] STARTING ANALYTICS PROCESSING
ğŸ“‚ [generateFullAnalytics] Data arrays: { campaigns: 25, demographics: 13, adLevel: 25 }
ğŸ” Analytics Debug:
ğŸ“Š Demographics length: 13
ğŸ“Š First demo spend: 2148.984817
ğŸ“Š Campaigns length: 25
ğŸ“Š First campaign spend: 0
ğŸ“Š Total calculated spend: 43669.800001999996
âœ¨ [Analytics Cache] Analytics processing completed
âŒ [Analytics Cache] Failed to cache data: {
  code: '23505',
  details: 'Key (client_id)=(9) already exists.',
  hint: null,
  message: 'duplicate key value violates unique constraint "analytics_cache_client_id_key"'
}
 GET /api/client/analytics/cached 200 in 5250ms
 â—‹ Compiling /client/analytics/campaigns ...
 âœ“ Compiled /client/analytics/campaigns in 2.4s
 GET /client/analytics/campaigns 200 in 4781ms
 GET /avatars/client.jpg 404 in 2774ms
ğŸ” [Analytics Cache] Fetching cached data for client 9
ğŸ”„ [Analytics Cache] Cached data is stale or missing, refreshing...
ğŸ”„ [Analytics Cache] Processing fresh Facebook data...
ğŸ“‹ [Analytics Cache] Report data keys: [
  'hourly',
  'adLevel',
  'devices',
  'regional',
  'campaigns',
  'platforms',
  'date_range',
  'scraped_at',
  'demographics',
  'month_identifier',
  'collection_summary'
]
ğŸ¯ [generateFullAnalytics] STARTING ANALYTICS PROCESSING
ğŸ“‚ [generateFullAnalytics] Data arrays: { campaigns: 25, demographics: 13, adLevel: 25 }
ğŸ” Analytics Debug:
ğŸ“Š Demographics length: 13
ğŸ“Š First demo spend: 2148.984817
ğŸ“Š Campaigns length: 25
ğŸ“Š First campaign spend: 0
ğŸ“Š Total calculated spend: 43669.800001999996
âœ¨ [Analytics Cache] Analytics processing completed
âŒ [Analytics Cache] Failed to cache data: {
  code: '23505',
  details: 'Key (client_id)=(9) already exists.',
  hint: null,
  message: 'duplicate key value violates unique constraint "analytics_cache_client_id_key"'
}
 GET /api/client/analytics/cached 200 in 7253ms
 GET /client/analytics/campaigns 200 in 1472ms
 GET /favicon.ico?favicon.0b3bf435.ico 200 in 4180ms
 GET /avatars/client.jpg 404 in 2980ms
ğŸ” [Analytics Cache] Fetching cached data for client 9
ğŸ”„ [Analytics Cache] Cached data is stale or missing, refreshing...
ğŸ”„ [Analytics Cache] Processing fresh Facebook data...
ğŸ“‹ [Analytics Cache] Report data keys: [
  'hourly',
  'adLevel',
  'devices',
  'regional',
  'campaigns',
  'platforms',
  'date_range',
  'scraped_at',
  'demographics',
  'month_identifier',
  'collection_summary'
]
ğŸ¯ [generateFullAnalytics] STARTING ANALYTICS PROCESSING
ğŸ“‚ [generateFullAnalytics] Data arrays: { campaigns: 25, demographics: 13, adLevel: 25 }
ğŸ” Analytics Debug:
ğŸ“Š Demographics length: 13
ğŸ“Š First demo spend: 2148.984817
ğŸ“Š Campaigns length: 25
ğŸ“Š First campaign spend: 0
ğŸ“Š Total calculated spend: 43669.800001999996
âœ¨ [Analytics Cache] Analytics processing completed
âŒ [Analytics Cache] Failed to cache data: {
  code: '23505',
  details: 'Key (client_id)=(9) already exists.',
  hint: null,
  message: 'duplicate key value violates unique constraint "analytics_cache_client_id_key"'
}
 GET /api/client/analytics/cached 200 in 6031ms
 GET /client/analytics 200 in 1394ms
 GET /avatars/client.jpg 404 in 2470ms
ğŸ” [Analytics Cache] Fetching cached data for client 9
ğŸ”„ [Analytics Cache] Cached data is stale or missing, refreshing...
ğŸ”„ [Analytics Cache] Processing fresh Facebook data...
ğŸ“‹ [Analytics Cache] Report data keys: [
  'hourly',
  'adLevel',
  'devices',
  'regional',
  'campaigns',
  'platforms',
  'date_range',
  'scraped_at',
  'demographics',
  'month_identifier',
  'collection_summary'
]
ğŸ¯ [generateFullAnalytics] STARTING ANALYTICS PROCESSING
ğŸ“‚ [generateFullAnalytics] Data arrays: { campaigns: 25, demographics: 13, adLevel: 25 }
ğŸ” Analytics Debug:
ğŸ“Š Demographics length: 13
ğŸ“Š First demo spend: 2148.984817
ğŸ“Š Campaigns length: 25
ğŸ“Š First campaign spend: 0
ğŸ“Š Total calculated spend: 43669.800001999996
âœ¨ [Analytics Cache] Analytics processing completed
âŒ [Analytics Cache] Failed to cache data: {
  code: '23505',
  details: 'Key (client_id)=(9) already exists.',
  hint: null,
  message: 'duplicate key value violates unique constraint "analytics_cache_client_id_key"'
}
 GET /api/client/analytics/cached 200 in 6067ms
 GET /client/analytics/campaigns 200 in 1411ms
 GET /avatars/client.jpg 404 in 2377ms
ğŸ” [Analytics Cache] Fetching cached data for client 9
ğŸ”„ [Analytics Cache] Cached data is stale or missing, refreshing...
ğŸ”„ [Analytics Cache] Processing fresh Facebook data...
ğŸ“‹ [Analytics Cache] Report data keys: [
  'hourly',
  'adLevel',
  'devices',
  'regional',
  'campaigns',
  'platforms',
  'date_range',
  'scraped_at',
  'demographics',
  'month_identifier',
  'collection_summary'
]
ğŸ¯ [generateFullAnalytics] STARTING ANALYTICS PROCESSING
ğŸ“‚ [generateFullAnalytics] Data arrays: { campaigns: 25, demographics: 13, adLevel: 25 }
ğŸ” Analytics Debug:
ğŸ“Š Demographics length: 13
ğŸ“Š First demo spend: 2148.984817
ğŸ“Š Campaigns length: 25
ğŸ“Š First campaign spend: 0
ğŸ“Š Total calculated spend: 43669.800001999996
âœ¨ [Analytics Cache] Analytics processing completed
âŒ [Analytics Cache] Failed to cache data: {
  code: '23505',
  details: 'Key (client_id)=(9) already exists.',
  hint: null,
  message: 'duplicate key value violates unique constraint "analytics_cache_client_id_key"'
}
 GET /api/client/analytics/cached 200 in 4902ms
 â—‹ Compiling /client/analytics/campaign-types ...
 âœ“ Compiled /client/analytics/campaign-types in 4.5s
 GET /client/analytics/campaign-types 200 in 5764ms
 GET /avatars/client.jpg 404 in 2181ms
ğŸ” [Analytics Cache] Fetching cached data for client 9
ğŸ”„ [Analytics Cache] Cached data is stale or missing, refreshing...
ğŸ”„ [Analytics Cache] Processing fresh Facebook data...
ğŸ“‹ [Analytics Cache] Report data keys: [
  'hourly',
  'adLevel',
  'devices',
  'regional',
  'campaigns',
  'platforms',
  'date_range',
  'scraped_at',
  'demographics',
  'month_identifier',
  'collection_summary'
]
ğŸ¯ [generateFullAnalytics] STARTING ANALYTICS PROCESSING
ğŸ“‚ [generateFullAnalytics] Data arrays: { campaigns: 25, demographics: 13, adLevel: 25 }
ğŸ” Analytics Debug:
ğŸ“Š Demographics length: 13
ğŸ“Š First demo spend: 2148.984817
ğŸ“Š Campaigns length: 25
ğŸ“Š First campaign spend: 0
ğŸ“Š Total calculated spend: 43669.800001999996
âœ¨ [Analytics Cache] Analytics processing completed
âŒ [Analytics Cache] Failed to cache data: {
  code: '23505',
  details: 'Key (client_id)=(9) already exists.',
  hint: null,
  message: 'duplicate key value violates unique constraint "analytics_cache_client_id_key"'
}
 GET /api/client/analytics/cached 200 in 5574ms
 â—‹ Compiling /client/analytics/engagement ...
 âœ“ Compiled /client/analytics/engagement in 4.3s
 GET /client/analytics/engagement 200 in 5911ms
 GET /avatars/client.jpg 404 in 2127ms
ğŸ” [Analytics Cache] Fetching cached data for client 9
ğŸ”„ [Analytics Cache] Cached data is stale or missing, refreshing...
ğŸ”„ [Analytics Cache] Processing fresh Facebook data...
ğŸ“‹ [Analytics Cache] Report data keys: [
  'hourly',
  'adLevel',
  'devices',
  'regional',
  'campaigns',
  'platforms',
  'date_range',
  'scraped_at',
  'demographics',
  'month_identifier',
  'collection_summary'
]
ğŸ¯ [generateFullAnalytics] STARTING ANALYTICS PROCESSING
ğŸ“‚ [generateFullAnalytics] Data arrays: { campaigns: 25, demographics: 13, adLevel: 25 }
ğŸ” Analytics Debug:
ğŸ“Š Demographics length: 13
ğŸ“Š First demo spend: 2148.984817
ğŸ“Š Campaigns length: 25
ğŸ“Š First campaign spend: 0
ğŸ“Š Total calculated spend: 43669.800001999996
âœ¨ [Analytics Cache] Analytics processing completed
âŒ [Analytics Cache] Failed to cache data: {
  code: '23505',
  details: 'Key (client_id)=(9) already exists.',
  hint: null,
  message: 'duplicate key value violates unique constraint "analytics_cache_client_id_key"'
}
 GET /api/client/analytics/cached 200 in 4886ms
 â—‹ Compiling /client/analytics/regional ...
 âœ“ Compiled /client/analytics/regional in 4.8s
 GET /client/analytics/regional 200 in 6935ms
 GET /avatars/client.jpg 404 in 2020ms
ğŸ” [Analytics Cache] Fetching cached data for client 9
ğŸ”„ [Analytics Cache] Cached data is stale or missing, refreshing...
ğŸ”„ [Analytics Cache] Processing fresh Facebook data...
ğŸ“‹ [Analytics Cache] Report data keys: [
  'hourly',
  'adLevel',
  'devices',
  'regional',
  'campaigns',
  'platforms',
  'date_range',
  'scraped_at',
  'demographics',
  'month_identifier',
  'collection_summary'
]
ğŸ¯ [generateFullAnalytics] STARTING ANALYTICS PROCESSING
ğŸ“‚ [generateFullAnalytics] Data arrays: { campaigns: 25, demographics: 13, adLevel: 25 }
ğŸ” Analytics Debug:
ğŸ“Š Demographics length: 13
ğŸ“Š First demo spend: 2148.984817
ğŸ“Š Campaigns length: 25
ğŸ“Š First campaign spend: 0
ğŸ“Š Total calculated spend: 43669.800001999996
âœ¨ [Analytics Cache] Analytics processing completed
âŒ [Analytics Cache] Failed to cache data: {
  code: '23505',
  details: 'Key (client_id)=(9) already exists.',
  hint: null,
  message: 'duplicate key value violates unique constraint "analytics_cache_client_id_key"'
}
 GET /api/client/analytics/cached 200 in 5872ms
 GET /client/analytics/demographics 200 in 1342ms
 GET /avatars/client.jpg 404 in 2563ms
ğŸ” [Analytics Cache] Fetching cached data for client 9
ğŸ”„ [Analytics Cache] Cached data is stale or missing, refreshing...
ğŸ”„ [Analytics Cache] Processing fresh Facebook data...
ğŸ“‹ [Analytics Cache] Report data keys: [
  'hourly',
  'adLevel',
  'devices',
  'regional',
  'campaigns',
  'platforms',
  'date_range',
  'scraped_at',
  'demographics',
  'month_identifier',
  'collection_summary'
]
ğŸ¯ [generateFullAnalytics] STARTING ANALYTICS PROCESSING
ğŸ“‚ [generateFullAnalytics] Data arrays: { campaigns: 25, demographics: 13, adLevel: 25 }
ğŸ” Analytics Debug:
ğŸ“Š Demographics length: 13
ğŸ“Š First demo spend: 2148.984817
ğŸ“Š Campaigns length: 25
ğŸ“Š First campaign spend: 0
ğŸ“Š Total calculated spend: 43669.800001999996
âœ¨ [Analytics Cache] Analytics processing completed
âŒ [Analytics Cache] Failed to cache data: {
  code: '23505',
  details: 'Key (client_id)=(9) already exists.',
  hint: null,
  message: 'duplicate key value violates unique constraint "analytics_cache_client_id_key"'
}
 GET /api/client/analytics/cached 200 in 4385ms
